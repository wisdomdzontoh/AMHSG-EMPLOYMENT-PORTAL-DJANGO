{% extends 'authentication/dash-base.html' %}
{% load static %}
{% block content %}

<div class="max-w-5xl mx-auto bg-white p-8 rounded-lg shadow-lg flex gap-8">
  <!-- Sidebar Menu -->
  <aside class="w-1/4">
    <ul class="space-y-4">
      <li id="step-1" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(1)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">1</span>
        <div>
          <p class="font-semibold">Personal Information</p>
          <p class="text-sm text-gray-500">Add / Edit Personal Info</p>
        </div>
      </li>
      <li id="step-2" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(2)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">2</span>
        <div>
          <p class="font-semibold">Educational Background</p>
          <p class="text-sm text-gray-500">Add education</p>
        </div>
      </li>
      <li id="step-3" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(3)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">3</span>
        <div>
          <p class="font-semibold">Evidence of Registration</p>
          <p class="text-sm text-gray-500">with relevant regulatory body</p>
        </div>
      </li>
      <li id="step-4" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(4)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">4</span>
        <div>
          <p class="font-semibold">Medical History</p>
          <p class="text-sm text-gray-500">add medical reports here</p>
        </div>
      </li>
      <li id="step-5" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(5)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">5</span>
        <div>
          <p class="font-semibold">Posting Preference</p>
          <p class="text-sm text-gray-500">select your choice of work</p>
        </div>
      </li>
      <li id="step-6" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(6)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">6</span>
        <div>
          <p class="font-semibold">Medical Certificate</p>
          <p class="text-sm text-gray-500">add your medical certifications</p>
        </div>
      </li>
      <li id="step-7" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(7)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">7</span>
        <div>
          <p class="font-semibold">Addendum</p>
          <p class="text-sm text-gray-500">Brief summary</p>
        </div>
      </li>
      <li id="step-8" class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200" onclick="showSection(8)" role="button">
        <span class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center">8</span>
        <div>
          <p class="font-semibold">Declaration</p>
          <p class="text-sm text-gray-500">Acceptance and agreement</p>
        </div>
      </li>
    </ul>
  </aside>
  
  <!-- Form Sections -->
  <div class="w-3/4">
    <form method="post" enctype="multipart/form-data" action="{% url 'application_form' job_id=job.id %}">
      {% csrf_token %}
      
      <div id="section-1" class="form-section">
        <h2>Personal Information</h2>
        {{ personal_info_form.as_p }}
        <button type="button" onclick="showSection(2)">Next</button>
      </div>

      <div id="section-2" class="form-section hidden">
        <h2>Educational Background</h2>
        {{ education_form.as_p }}
        <button type="button" onclick="showSection(1)">Previous</button>
        <button type="button" onclick="showSection(3)">Next</button>
      </div>

      <div id="section-3" class="form-section hidden">
        <h2>Evidence of Registration</h2>
        {{ registration_form.as_p }}
        <button type="button" onclick="showSection(2)">Previous</button>
        <button type="button" onclick="showSection(4)">Next</button>
      </div>

      <div id="section-4" class="form-section hidden">
        <h2>Medical History</h2>
        {{ medical_history_form.as_p }}
        <button type="button" onclick="showSection(3)">Previous</button>
        <button type="button" onclick="showSection(5)">Next</button>
      </div>

      <div id="section-5" class="form-section hidden">
        <h2>Posting Preference</h2>
        {{ posting_preference_form.as_p }}
        <button type="button" onclick="showSection(4)">Previous</button>
        <button type="button" onclick="showSection(6)">Next</button>
      </div>

      <div id="section-6" class="form-section hidden">
        <h2>Medical Certificate</h2>
        {{ medical_certification_form.as_p }}
        <button type="button" onclick="showSection(5)">Previous</button>
        <button type="button" onclick="showSection(7)">Next</button>
      </div>

      <div id="section-7" class="form-section hidden">
        <h2>Addendum</h2>
        {{ addendum_form.as_p }}
        <button type="button" onclick="showSection(6)">Previous</button>
        <button type="button" onclick="showSection(8)">Next</button>
      </div>

      <div id="section-8" class="form-section hidden">
        <h2>Declaration</h2>
        {{ declaration_form.as_p }}
        <button type="button" onclick="showSection(7)">Previous</button>
        <button type="submit">Submit</button>
      </div>
    </form>
  </div>
</div>

<script>
  function showSection(sectionNumber) {
    const sections = document.querySelectorAll('.form-section');
    const steps = document.querySelectorAll('.step');

    sections.forEach(section => section.classList.add('hidden'));
    steps.forEach(step => {
      step.classList.remove('bg-indigo-100', 'text-indigo-700');
      step.querySelector('span').classList.replace('bg-indigo-500', 'bg-gray-300');
      step.querySelector('span').classList.replace('text-white', 'text-gray-700');
    });

    document.getElementById(`section-${sectionNumber}`).classList.remove('hidden');
    const activeStep = document.getElementById(`step-${sectionNumber}`);
    activeStep.classList.add('bg-indigo-100', 'text-indigo-700');
    activeStep.querySelector('span').classList.replace('bg-gray-300', 'bg-indigo-500');
    activeStep.querySelector('span').classList.replace('text-gray-700', 'text-white');
  }

  // Initialize first section as visible
  document.addEventListener('DOMContentLoaded', function () {
    showSection(1);
  });
</script>

{% endblock %}
