{% extends 'authentication/dash-base.html' %} {% load static %} {% block content%}

<div class="max-w-5xl mx-auto bg-white p-8 rounded-lg shadow-lg flex gap-8">
  <!-- Sidebar Menu -->
  <aside class="w-1/4">
    <ul class="space-y-4">
      <li
        id="step-1"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(1)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >1</span
        >
        <div>
          <p class="font-semibold">Personal Information</p>
          <p class="text-sm text-gray-500">Add / Edit Personal Info</p>
        </div>
      </li>
      <li
        id="step-2"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(2)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >2</span
        >
        <div>
          <p class="font-semibold">Educational Background</p>
          <p class="text-sm text-gray-500">Add education</p>
        </div>
      </li>
      <li
        id="step-3"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(3)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >3</span
        >
        <div>
          <p class="font-semibold">Evidence of Registration</p>
          <p class="text-sm text-gray-500">with relevant regulatory body</p>
        </div>
      </li>
      <li
        id="step-4"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(4)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >4</span
        >
        <div>
          <p class="font-semibold">Medical History</p>
          <p class="text-sm text-gray-500">add medical reports here</p>
        </div>
      </li>
      <li
        id="step-5"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(5)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >5</span
        >
        <div>
          <p class="font-semibold">Posting Preference</p>
          <p class="text-sm text-gray-500">select your choice of work</p>
        </div>
      </li>
      <li
        id="step-6"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(6)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >6</span
        >
        <div>
          <p class="font-semibold">Medical Certificate</p>
          <p class="text-sm text-gray-500">add your medical certifications</p>
        </div>
      </li>
      <li
        id="step-7"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(7)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >7</span
        >
        <div>
          <p class="font-semibold">Addendum</p>
          <p class="text-sm text-gray-500">Brief summary</p>
        </div>
      </li>
      <li
        id="step-8"
        class="step flex items-center cursor-pointer p-3 rounded-lg hover:bg-gray-200"
        onclick="showSection(8)"
        role="button"
      >
        <span
          class="mr-3 bg-gray-300 text-gray-700 rounded-full h-8 w-8 flex items-center justify-center"
          >8</span
        >
        <div>
          <p class="font-semibold">Declaration</p>
          <p class="text-sm text-gray-500">Acceptance and agreement</p>
        </div>
      </li>
    </ul>
  </aside>

  <!-- Form Sections -->
  <div class="w-3/4">
    <form
      method="post"
      enctype="multipart/form-data"
      action="{% url 'application_form' job_id=job.id %}"
    >
      {% csrf_token %}

      <!-- Section 1: Personal Information -->
      <div id="section-1" class="form-section">
        <h2 class="text-2xl font-semibold mb-4">Personal Information</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="form-group">
            <label for="job_id" class="block text-sm font-medium text-gray-700"
              >Job Title</label
            >
            <select
              id="job_id"
              name="job_id"
              class="block w-full mt-1 rounded-md border-gray-300 shadow-sm"
            >
              <option value="">Select a job</option>
              {% for job in jobs %}
              <option value="{{ job.id }}">{{ job.title }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Add other fields here as needed -->

          <!-- Add other fields here as needed -->
          <div class="flex flex-col">
            <label for="title" class="font-semibold text-gray-700 mb-1"
              >Title</label
            >
            {{personal_info_form.title}}
          </div>

          <div class="flex flex-col">
            <label for="email" class="font-semibold text-gray-700 mb-1"
              >Email</label
            >
            {{personal_info_form.email}}
          </div>

          <div class="flex flex-col">
            <label for="first_name" class="font-semibold text-gray-700 mb-1"
              >First Name</label
            >
            {{personal_info_form.first_name}}
          </div>

          <div class="flex flex-col">
            <label for="surname" class="font-semibold text-gray-700 mb-1"
              >Last Name</label
            >
            {{personal_info_form.surname}}
          </div>

          <div class="flex flex-col">
            <label for="other_names" class="font-semibold text-gray-700 mb-1"
              >Other Name</label
            >
            {{personal_info_form.other_names}}
          </div>

          <div class="flex flex-col">
            <label for="id_telephone" class="font-semibold text-gray-700 mb-1"
              >Telephone</label
            >
            {{ personal_info_form.telephone }}
          </div>

          <div class="flex flex-col">
            <label for="id_dob" class="font-semibold text-gray-700 mb-1"
              >Date of Birth</label
            >
            {{ personal_info_form.dob }}
          </div>

          <div class="flex flex-col">
            <label for="id_birthplace" class="font-semibold text-gray-700 mb-1"
              >Birthplace</label
            >
            {{ personal_info_form.birthplace }}
          </div>

          <div class="flex flex-col">
            <label for="marital_status" class="font-semibold text-gray-700 mb-1"
              >Marital Status</label
            >
            {{ personal_info_form.marital_status }}
          </div>

          <div class="flex flex-col">
            <label for="gender" class="font-semibold text-gray-700 mb-1"
              >Gender</label
            >
            {{ personal_info_form.gender }}
          </div>

          <div class="flex flex-col">
            <label for="fathers_name" class="font-semibold text-gray-700 mb-1"
              >Fathers Name</label
            >
            {{ personal_info_form.fathers_name }}
          </div>

          <div class="flex flex-col">
            <label
              for="fathers_occupation"
              class="font-semibold text-gray-700 mb-1"
              >Fathers Occupation</label
            >
            {{ personal_info_form.fathers_occupation }}
          </div>

          <div class="flex flex-col">
            <label for="mothers_name" class="font-semibold text-gray-700 mb-1"
              >Mothers Name</label
            >
            {{ personal_info_form.mothers_name }}
          </div>

          <div class="flex flex-col">
            <label
              for="mothers_occupation"
              class="font-semibold text-gray-700 mb-1"
              >Mothers Occupation</label
            >
            {{ personal_info_form.mothers_occupation }}
          </div>

          <div class="flex flex-col">
            <label for="next_of_kin" class="font-semibold text-gray-700 mb-1"
              >Next of Kin</label
            >
            {{ personal_info_form.next_of_kin }}
          </div>

          <div class="flex flex-col">
            <label
              for="next_of_kin_occupation"
              class="font-semibold text-gray-700 mb-1"
              >Next of Kin Occupation</label
            >
            {{ personal_info_form.next_of_kin_occupation }}
          </div>

          <div class="flex flex-col">
            <label for="contact_person" class="font-semibold text-gray-700 mb-1"
              >Name of contact person</label
            >
            {{ personal_info_form.contact_person }}
          </div>

          <div class="flex flex-col">
            <label for="relation" class="font-semibold text-gray-700 mb-1"
              >Relation</label
            >
            {{ personal_info_form.relation }}
          </div>

          <div class="flex flex-col">
            <label
              for="contact_address"
              class="font-semibold text-gray-700 mb-1"
              >Contact Address</label
            >
            {{ personal_info_form.contact_address }}
          </div>

          <!--passport picture--->
          <div class="form-group">
            <label
              for="passport_picture"
              class="block text-sm font-medium text-gray-700"
              >Passport Picture</label
            >
            <input
              type="file"
              id="passport_picture"
              name="passport_picture"
              class="block w-full mt-1 rounded-md border-gray-300 shadow-sm"
              onchange="previewImage(event)"
            />

            <img
              class="mt-4 w-32 h-32 object-cover rounded-full border border-gray-300"
              id="passport_picture_preview"
              src="#"
              alt="Passport Picture Preview"
            />
          </div>
        </div>

        <!-- Example Button with Tailwind CSS -->
        <button
          type="button"
          class="bg-blue-500 text-white font-bold py-2 px-4 rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"
          onclick="showSection(2)"
        >
          Next
        </button>
      </div>

      <!-- Educational Background Section -->
<div id="section-2" class="form-section hidden p-6 bg-white rounded-lg shadow-md">
  <h2 class="text-2xl font-semibold text-gray-800 mb-6">Educational Background</h2>

  <!-- Educational Background Form -->
      
      <!-- JHS Section -->
      <div class="border p-4 rounded-lg bg-gray-50">
          <h3 class="text-xl font-semibold text-gray-700 mb-4">Junior High School (JHS)</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                  <label for="JHS_level" class="block text-sm font-medium text-gray-700 mb-1">Level</label>
                  {{ education_form.JHS_level }}
              </div>
              <div>
                  <label for="JHS_school" class="block text-sm font-medium text-gray-700 mb-1">School</label>
                  {{ education_form.JHS_school }}
              </div>
              <div>
                  <label for="JHS_field_of_study" class="block text-sm font-medium text-gray-700 mb-1">Field of Study</label>
                  {{ education_form.JHS_field_of_study }}
              </div>
              <div>
                  <label for="JHS_date_started" class="block text-sm font-medium text-gray-700 mb-1">Date Started</label>
                  {{ education_form.JHS_date_started }}
              </div>
              <div>
                  <label for="JHS_date_completed" class="block text-sm font-medium text-gray-700 mb-1">Date Completed</label>
                  {{ education_form.JHS_date_completed }}
              </div>
              <div class="col-span-2">
                  <label for="JHS_certificates" class="block text-sm font-medium text-gray-700 mb-1">Certificates</label>
                  {{ education_form.JHS_certificates }}
              </div>
          </div>
      </div>

      <!-- SHS Section -->
      <div class="border p-4 rounded-lg bg-gray-50 mt-6">
          <h3 class="text-xl font-semibold text-gray-700 mb-4">Senior High School (SHS)</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                  <label for="SHS_level" class="block text-sm font-medium text-gray-700 mb-1">Level</label>
                  {{ education_form.SHS_level }}
              </div>
              <div>
                  <label for="SHS_school" class="block text-sm font-medium text-gray-700 mb-1">School</label>
                  {{ education_form.SHS_school }}
              </div>
              <div>
                  <label for="SHS_field_of_study" class="block text-sm font-medium text-gray-700 mb-1">Field of Study</label>
                  {{ education_form.SHS_field_of_study }}
              </div>
              <div>
                  <label for="SHS_date_started" class="block text-sm font-medium text-gray-700 mb-1">Date Started</label>
                  {{ education_form.SHS_date_started }}
              </div>
              <div>
                  <label for="SHS_date_completed" class="block text-sm font-medium text-gray-700 mb-1">Date Completed</label>
                  {{ education_form.SHS_date_completed }}
              </div>
              <div class="col-span-2">
                  <label for="SHS_certificates" class="block text-sm font-medium text-gray-700 mb-1">Certificates</label>
                  {{ education_form.SHS_certificates }}
              </div>
          </div>
      </div>

      <!-- Tertiary Section -->
      <div class="border p-4 rounded-lg bg-gray-50 mt-6">
          <h3 class="text-xl font-semibold text-gray-700 mb-4">Tertiary Education</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                  <label for="TERTIARY_level" class="block text-sm font-medium text-gray-700 mb-1">Level</label>
                  {{ education_form.TERTIARY_level }}
              </div>
              <div>
                  <label for="TERTIARY_school" class="block text-sm font-medium text-gray-700 mb-1">School</label>
                  {{ education_form.TERTIARY_school }}
              </div>
              <div>
                  <label for="TERTIARY_field_of_study" class="block text-sm font-medium text-gray-700 mb-1">Field of Study</label>
                  {{ education_form.TERTIARY_field_of_study }}
              </div>
              <div>
                  <label for="TERTIARY_date_started" class="block text-sm font-medium text-gray-700 mb-1">Date Started</label>
                  {{ education_form.TERTIARY_date_started }}
              </div>
              <div>
                  <label for="TERTIARY_date_completed" class="block text-sm font-medium text-gray-700 mb-1">Date Completed</label>
                  {{ education_form.TERTIARY_date_completed }}
              </div>
              <div class="col-span-2">
                  <label for="TERTIARY_certificates" class="block text-sm font-medium text-gray-700 mb-1">Certificates</label>
                  {{ education_form.TERTIARY_certificates }}
              </div>
          </div>
      </div>

      <!-- Navigation Buttons -->
      <div class="flex justify-between mt-6">
          <button type="button" class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500" onclick="showSection(1)">
              Previous
          </button>
          <button type="button" class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="showSection(3)">
              Next
          </button>
      </div>
</div>


     <!-- Professional Registration Section -->
<div id="section-3" class="form-section hidden p-6 bg-white rounded-lg shadow-md">
  <h2 class="text-2xl font-semibold text-gray-800 mb-6">Professional Registration</h2>

  <!-- Professional Registration Form -->

      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Regulatory Body -->
          <div>
              <label for="regulatory_body" class="block text-sm font-medium text-gray-700 mb-1">Regulatory Body</label>
              {{ registration_form.regulatory_body }}
          </div>

          <!-- Registration Pin -->
          <div>
              <label for="registration_pin" class="block text-sm font-medium text-gray-700 mb-1">Registration Pin</label>
              {{ registration_form.registration_pin }}
          </div>

          <!-- Date Received -->
          <div>
              <label for="date_received" class="block text-sm font-medium text-gray-700 mb-1">Date Received</label>
              {{ registration_form.date_received }}
          </div>

          <!-- License Certificate -->
          <div class="col-span-2">
              <label for="license_cert" class="block text-sm font-medium text-gray-700 mb-1">License Certificate</label>
              {{ registration_form.license_cert }}
          </div>
      </div>

      <!-- Navigation Buttons -->
      <div class="flex justify-between mt-6">
          <button type="button" class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500" onclick="showSection(2)">
              Previous
          </button>
          <button type="button" class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="showSection(4)">
              Next
          </button>
      </div>
</div>


      <div id="section-4" class="form-section hidden">
        <h2>Medical History</h2>
        {{ medical_history_form.as_p }}
        <button type="button" onclick="showSection(3)">Previous</button>
        <button type="button" onclick="showSection(5)">Next</button>
      </div>

      <!-- Posting Preference Section -->
<div id="section-5" class="form-section hidden p-6 bg-white rounded-lg shadow-md">
  <h2 class="text-2xl font-semibold text-gray-800 mb-6">Posting Preference</h2>
  
 

      <!-- Choice 1 -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="first_choice_region" class="block text-sm font-medium text-gray-700 mb-1">First Choice Region</label>
          <select id="first_choice_region" name="first_choice_region" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm">
            <option value="">Select a region</option>
            {% for region in regions %}
            <option value="{{ region.id }}">{{ region.region_name }}</option>
            {% endfor %}
          </select>
        </div>
        
        <div>
          <label for="first_choice_facility" class="block text-sm font-medium text-gray-700 mb-1">First Choice Facility</label>
          <select id="first_choice_facility" name="first_choice_facility" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm">
            <option value="">Select a facility</option>
          </select>
        </div>
      </div>

       <!-- Choice 2 -->
       <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="second_choice_region" class="block text-sm font-medium text-gray-700 mb-1">Second Choice Region</label>
          <select id="second_choice_region" name="second_choice_region" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm">
            <option value="">Select a region</option>
            {% for region in regions %}
            <option value="{{ region.id }}">{{ region.region_name }}</option>
            {% endfor %}
          </select>
        </div>
        
        <div>
          <label for="second_choice_facility" class="block text-sm font-medium text-gray-700 mb-1">Second Choice Facility</label>
          <select id="second_choice_facility" name="second_choice_facility" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm">
            <option value="">Select a facility</option>
          </select>
        </div>
      </div>


      <!-- Choice 3 -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="third_choice_region" class="block text-sm font-medium text-gray-700 mb-1">Third Choice Region</label>
          <select id="third_choice_region" name="third_choice_region" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm">
            <option value="">Select a region</option>
            {% for region in regions %}
            <option value="{{ region.id }}">{{ region.region_name }}</option>
            {% endfor %}
          </select>
        </div>
        
        <div>
          <label for="third_choice_facility" class="block text-sm font-medium text-gray-700 mb-1">Third Choice Facility</label>
          <select id="third_choice_facility" name="third_choice_facility" class="block w-full mt-1 rounded-md border-gray-300 shadow-sm">
            <option value="">Select a facility</option>
          </select>
        </div>
      </div>
      

        



  
      <!-- Repeat for second and third choices -->

      <!-- Navigation Buttons -->
      <div class="flex justify-between mt-6">
          <button type="button" class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500" onclick="showSection(4)">
              Previous
          </button>
          <button type="button" class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" onclick="showSection(6)">
              Next
          </button>
      </div>

</div>


<div id="section-6" class="form-section hidden p-6 bg-white rounded-lg shadow-md">
  <h2 class="text-2xl font-semibold text-gray-800 mb-6">Medical Certificate</h2>
  
  <!-- Medical Certification Form -->
  <div class="grid grid-cols-1 gap-6">
      <!-- Render form fields with improved styling -->
      {{ medical_certification_form.as_p }}
  </div>
  
  <!-- Navigation Buttons -->
  <div class="flex justify-between mt-6">
      <button type="button" 
              class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500" 
              onclick="showSection(5)">
          Previous
      </button>
      <button type="button" 
              class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" 
              onclick="showSection(7)">
          Next
      </button>
  </div>
</div>


      <div id="section-7" class="form-section hidden">
        <h2>Addendum</h2>
        <ol class="list-decimal list-inside ml-6 text-gray-700">
          <li>
            Registered General Nurses, Registered Midwives and auxiliary nurses
            are required to attach photocopies of the NMC results slips and
            PIN/AIN.
          </li>
          <li>
            Other Diploma holders are required to attach photocopies of their
            school certificates/transcripts, evidence of completion of National
            Service, and evidence of registration with the appropriate
            regulatory body where applicable.
          </li>
          <li>
            Other certificate holders are to attach photocopies of their school
            certificates. In all cases, applicants must attach photocopies of
            their birth certificates.
          </li>
        </ol>

        <h3 class="text-lg font-bold mt-4">
          B. Programmes and Other Corresponding Grades
        </h3>
        <table
            class="min-w-full table-auto border-collapse border border-gray-300 text-left text-sm"
          >
            <thead class="bg-gray-200">
              <tr>
                <th class="border border-gray-300 px-4 py-2">S/No.</th>
                <th class="border border-gray-300 px-4 py-2">
                  Programme of Study
                </th>
                <th class="border border-gray-300 px-4 py-2">
                  Corresponding Grade
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="border border-gray-300 px-4 py-2">1</td>
                <td class="border border-gray-300 px-4 py-2">
                  Degree/Advanced Diploma in CM/COH
                </td>
                <td class="border border-gray-300 px-4 py-2">
                  Physician Assistant
                </td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2">2</td>
                <td class="border border-gray-300 px-4 py-2">
                  Diploma in Community Medicine & Health
                </td>
                <td class="border border-gray-300 px-4 py-2">
                  Medical Assistant
                </td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2">3</td>
                <td class="border border-gray-300 px-4 py-2">
                  Diploma General Nursing, Psychiatry & Midwifery
                </td>
                <td class="border border-gray-300 px-4 py-2">
                  Staff Nurse, Staff Midwife
                </td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2">4</td>
                <td class="border border-gray-300 px-4 py-2">
                  Diploma in Community Health Nursing
                </td>
                <td class="border border-gray-300 px-4 py-2">
                  Staff Nurse (RCN)
                </td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2">5</td>
                <td class="border border-gray-300 px-4 py-2">
                  Certificate in Community Health Nursing
                </td>
                <td class="border border-gray-300 px-4 py-2">
                  Community Health Nurse
                </td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2">6</td>
                <td class="border border-gray-300 px-4 py-2">
                  Certificate Health Assistant Clinical
                </td>
                <td class="border border-gray-300 px-4 py-2">Enrolled Nurse</td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2">7</td>
                <td class="border border-gray-300 px-4 py-2">
                  Diploma in Disease Control, Health Information, Medical
                  Laboratory etc.
                </td>
                <td class="border border-gray-300 px-4 py-2">
                  Technical Officer (Specialty)
                </td>
              </tr>
              <tr>
                <td class="border border-gray-300 px-4 py-2">8</td>
                <td class="border border-gray-300 px-4 py-2">Others</td>
                <td class="border border-gray-300 px-4 py-2">
                  Field Technicians/Technical Assistant (Specialty)
                </td>
              </tr>
            </tbody>
          </table>
        {{ addendum_form.as_p }}
        
  <div class="flex justify-between mt-6">
        <button type="button" 
              class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500" 
              onclick="showSection(6)">
          Previous
      </button>
      <button type="button" 
              class="bg-blue-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" 
              onclick="showSection(8)">
          Next
      </button>
      </div>
    </div>

    <div id="section-8" class="form-section hidden p-6 bg-white rounded-lg shadow-md">
      <h2 class="text-2xl font-semibold text-gray-800 mb-6">Declaration</h2>
      
      <!-- Declaration Form -->
      <div class="grid grid-cols-1 gap-6">
        <!-- Declaration Text -->
<div class="border-t border-gray-300 pt-4 mb-6 text-gray-700">
  <p>
    I confirm that the information I have provided in this form is
    accurate to the best of my knowledge and belief. If however, it is
    detected that I have made any false claims, I may be committing an
    offence under Part One of Act 857 (2013).
  </p>
</div>
          <!-- Render the declaration form fields -->
          {{ declaration_form.as_p }}
      </div>
  
      <!-- Navigation and Submit Buttons -->
      <div class="flex justify-between mt-6">
          <!-- Previous Button -->
          <button type="button" 
                  class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500" 
                  onclick="showSection(7)">
              Previous
          </button>
  
          <!-- Submit Button -->
          <button type="submit" 
                  class="bg-green-500 text-white font-semibold py-2 px-4 rounded-md shadow-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500">
              Submit
          </button>
      </div>
  </div>
  
    </form>
  </div>
</div>

<script>
  function showSection(sectionNumber) {
    const sections = document.querySelectorAll(".form-section");
    const steps = document.querySelectorAll(".step");

    sections.forEach((section) => section.classList.add("hidden"));
    steps.forEach((step) => {
      step.classList.remove("bg-indigo-100", "text-indigo-700");
      step
        .querySelector("span")
        .classList.replace("bg-indigo-500", "bg-gray-300");
      step
        .querySelector("span")
        .classList.replace("text-white", "text-gray-700");
    });

    document
      .getElementById(`section-${sectionNumber}`)
      .classList.remove("hidden");
    const activeStep = document.getElementById(`step-${sectionNumber}`);
    activeStep.classList.add("bg-indigo-100", "text-indigo-700");
    activeStep
      .querySelector("span")
      .classList.replace("bg-gray-300", "bg-indigo-500");
    activeStep
      .querySelector("span")
      .classList.replace("text-gray-700", "text-white");
  }

  // Initialize first section as visible
  document.addEventListener("DOMContentLoaded", function () {
    showSection(1);
  });
</script>

<!--PASSPORT PICTURE PREVIEW CODE-->
<script>
  function previewImage(event) {
    const file = event.target.files[0];
    const preview = document.getElementById("passport_picture_preview");

    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        preview.src = e.target.result;
        preview.classList.remove("hidden");
      };
      reader.readAsDataURL(file);
    } else {
      preview.src = "#";
      preview.classList.add("hidden");
    }
  }
</script>


<!--FACILITY CHOICE SET CASCADING-->
<script>

  document.addEventListener('DOMContentLoaded', function() {
    // Function to update facilities based on region selection
    function updateFacilities(regionIdField, facilityIdField) {
        const regionId = document.getElementById(regionIdField).value;
        const facilitySelect = document.getElementById(facilityIdField);

        // Clear existing options
        facilitySelect.innerHTML = '<option value="">Select a facility</option>';

        if (regionId) {
            fetch(`/get_facilities/${regionId}/`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    data.facilities.forEach(facility => {
                        const option = document.createElement('option');
                        option.value = facility.id;
                        option.textContent = facility.facility_name;
                        facilitySelect.appendChild(option);
                    });
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                    alert('Error fetching facilities. Please try again later.');
                });
        }
    }

    // Function to prevent selecting duplicate regions
    function preventDuplicateRegions() {
        const allRegionSelects = [
            document.getElementById('first_choice_region'),
            document.getElementById('second_choice_region'),
            document.getElementById('third_choice_region')
        ];

        const selectedRegions = allRegionSelects.map(select => select.value);

        allRegionSelects.forEach((select, idx) => {
            [...select.options].forEach(option => {
                // Disable options if they are selected in other regions
                if (selectedRegions.includes(option.value) && option.value !== "") {
                    if (select.value !== option.value) {
                        option.disabled = true;
                    }
                } else {
                    option.disabled = false;
                }
            });
        });
    }

    // Event listeners for the region dropdowns
    document.getElementById('first_choice_region').addEventListener('change', function() {
        updateFacilities('first_choice_region', 'first_choice_facility');
        preventDuplicateRegions();
    });

    document.getElementById('second_choice_region').addEventListener('change', function() {
        updateFacilities('second_choice_region', 'second_choice_facility');
        preventDuplicateRegions();
    });

    document.getElementById('third_choice_region').addEventListener('change', function() {
        updateFacilities('third_choice_region', 'third_choice_facility');
        preventDuplicateRegions();
    });
});


</script>




{% endblock %}
